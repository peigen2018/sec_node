## 四个主线
1. 内核的内在安全性及其对命名空间和 cgroup 的支持；
2. docker守护进程攻击面
3. 配置文件中漏洞，默认情况下还是用户自定义
4. 内核强化安全功能及如何与内核交互



## 内核安全性
### kernel namespaces？
docker run 启动容器时，Docker 在为容器创建一组命名空间和控制组。

在容器中运行的进程无法看到在另一个容器或主机系统中运行的进程

### network 
每个容器拥有自己的网络堆栈，容器无法获得对另一个容器的套接字或接口的特权访问。如果主机系统进行了相应的设置，容器可以通过各自的网络接口相互交互

### Control groups
他们实施资源核算和限制。它们提供了许多有用的指标，但它们也有助于确保每个容器获得其公平份额的内存、CPU、磁盘 I/O；更重要的是，单个容器不会因为耗尽这些资源之一而导致系统瘫痪。

单个容器不会因为耗尽这些资源之一而导致系统瘫痪,它们对于多租户平台（例如公共和私有 PaaS）尤其重要，即使在某些应用程序开始出现问题时，也能保证一致的正常运行时间（和性能）。
虽然它们在阻止一个容器访问或影响另一个容器的数据和进程方面没有发挥作用，但它们对于抵御某些拒绝服务攻击至关重要。它们对于多租户平台（例如公共和私有 PaaS）尤其重要，即使在某些应用程序开始出现问题时，也能保证一致的正常运行时间（和性能


## Docker daemon attack surface
使用 Docker 运行容器（和应用程序）意味着运行 Docker daemon。除非您选择 Rootless mode模式，否则此守护程序需要根权限，因此您应该了解一些重要的细节。

首先，只有受信任的用户才有权控制您的 Docker 守护进程。这是一些强大的 Docker 功能的直接结果。具体来说，Docker 允许您在 Docker 主机和来宾容器之间共享目录；它允许您在不限制容器访问权限的情况下执行此操作。这意味着你可以启动一个容器，其中/host目录就是你主机上的/目录；并且容器可以不受任何限制地更改主机文件系统。这类似于虚拟化系统允许文件系统资源共享的方式。没有什么可以阻止您与虚拟机共享根文件系统（甚至根块设备）

如果您从 Web 服务器检测 Docker 以通过 API 提供容器，则您应该比平常更加小心地进行参数检查，以确保恶意用户无法传递精心设计的参数，从而导致 Docker创建任意容器

REST API 端点（Docker CLI 用于与 Docker 守护进程通信）在 Docker 0.5.2 中发生了更改，现在使用 UNIX 套接字而不是绑定在 127.0.0.1 上的 TCP 套接字（后者容易出现如果您碰巧在虚拟机外部的本地计算机上直接运行 Docker，则会发生跨站点请求伪造攻击）。然后，您可以使用传统的 UNIX 权限检查来限制对控制套接字的访问。